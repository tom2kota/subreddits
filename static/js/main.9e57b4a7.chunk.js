(this["webpackJsonpredux-async-posts"]=this["webpackJsonpredux-async-posts"]||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},28:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(3),c=a(2),s=a(5),d=a(12),l=(a(27),a(4)),u=a(1),o=function(e){return{type:"SELECT_SUBREDDIT",subreddit:e}},m=function(e){return{type:"INVALIDATE_SUBREDDIT",subreddit:e}},p=function(e){return function(t){return t(function(e){return{type:"REQUEST_POSTS",subreddit:e}}(e)),fetch("https://www.reddit.com/r/".concat(e,".json")).then((function(e){return e.json()})).then((function(a){return t(function(e,t){return{type:"RECEIVE_POSTS",subreddit:e,posts:t.data.children.map((function(e){return e.data})),receivedAt:Date.now()}}(e,a))}))}},E=function(e){return function(t,a){if(function(e,t){var a=e.postsBySubreddit[t];return!a||!a.isFetching&&a.didInvalidate}(a(),e))return t(p(e))}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,didInvalidate:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_SUBREDDIT":return Object(u.a)(Object(u.a)({},e),{},{didInvalidate:!0});case"REQUEST_POSTS":return Object(u.a)(Object(u.a)({},e),{},{isFetching:!0,didInvalidate:!1});case"RECEIVE_POSTS":return Object(u.a)(Object(u.a)({},e),{},{isFetching:!1,didInvalidate:!1,items:t.posts,lastUpdated:t.receivedAt});default:return e}},v=Object(c.c)({postsBySubreddit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_SUBREDDIT":case"RECEIVE_POSTS":case"REQUEST_POSTS":return Object(u.a)(Object(u.a)({},e),{},Object(l.a)({},t.subreddit,h(e[t.subreddit],t)));default:return e}},selectedSubreddit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_SUBREDDIT":return t.subreddit;default:return e}}}),f=a(13),b=a(14),S=a(16),g=a(15),O=function(e){var t=e.value,a=e.onChange,n=e.options;return i.a.createElement("div",{className:"two fields"},i.a.createElement("div",{className:"field"},i.a.createElement("h2",{className:"ui teal header"},t.toUpperCase())),i.a.createElement("div",{className:"field"},i.a.createElement("select",{onChange:function(e){return a(e.target.value)},value:t},n.map((function(e){return i.a.createElement("option",{value:e,key:e},e)})))))},y=function(e){var t=e.posts;return i.a.createElement("div",null,t.map((function(e,t){return i.a.createElement("p",{className:"ui floating message",key:t},e.title)})))},N=function(e){Object(S.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleChange=function(t){e.props.dispatch(o(t))},e.handleRefreshClick=function(t){t.preventDefault();var a=e.props,n=a.dispatch,i=a.selectedSubreddit;n(m(i)),n(E(i))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.selectedSubreddit;t(E(a))}},{key:"componentDidUpdate",value:function(e){if(e.selectedSubreddit!==this.props.selectedSubreddit){var t=this.props,a=t.dispatch,n=t.selectedSubreddit;a(E(n))}}},{key:"render",value:function(){var e=this.props,t=e.selectedSubreddit,a=e.posts,n=e.isFetching,r=e.lastUpdated,c=0===a.length;return i.a.createElement("div",{className:"ui container"},i.a.createElement("div",{className:"ui segments"},i.a.createElement("div",{className:"ui massive center aligned segment"},i.a.createElement("div",{className:"header"},"Welcome to our site!"),i.a.createElement("p",null,"Render ",i.a.createElement("a",{className:"ui teal header",href:"https://www.reddit.com/subreddits"},"SubReddits")," - React Redux App")),i.a.createElement("form",{className:"ui form center aligned secondary segment "},i.a.createElement("div",{className:"two fields"},i.a.createElement("div",{className:"field"},i.a.createElement(O,{value:t,onChange:this.handleChange,options:["home","pics","funny"]})),i.a.createElement("div",{className:"field"},!n&&i.a.createElement("button",{onClick:this.handleRefreshClick,className:"ui teal button"},"REFRESH"))))),r&&i.a.createElement("div",{className:"ui bottom  warning floating message"},"Last updated at ",new Date(r).toLocaleTimeString(),"."," "),i.a.createElement("div",null,c?n?i.a.createElement("div",{className:"ui active centered inline loader"}):i.a.createElement("div",{className:"ui bottom  warning floating message"},i.a.createElement("h2",null,i.a.createElement("i",{className:"icon warning"}),"Something went wrong ... Empty.")):i.a.createElement("div",{style:{opacity:n?.5:1}},i.a.createElement(y,{posts:a}))))}}]),a}(n.Component),w=Object(s.b)((function(e){var t=e.selectedSubreddit,a=e.postsBySubreddit[t]||{isFetching:!0,items:[]},n=a.isFetching,i=a.lastUpdated;return{selectedSubreddit:t,posts:a.items,isFetching:n,lastUpdated:i}}))(N),T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,I=[d.a];var D=Object(c.e)(v,T(c.a.apply(void 0,I)));Object(r.render)(i.a.createElement(s.a,{store:D},i.a.createElement(w,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.9e57b4a7.chunk.js.map